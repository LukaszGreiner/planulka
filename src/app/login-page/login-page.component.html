<div
  class="auth-page-container flex items-center justify-center min-h-screen p-4"
>
  <form
    [formGroup]="form"
    class="auth-card backdrop-blur-md bg-white/10 shadow-[0_8px_32px_rgba(0,0,0,0.37)] animate-enter flex flex-col gap-6 p-8"
    autocomplete="on"
    (ngSubmit)="onSubmit()"
  >
    <img
      src="assets/images/logo.png"
      alt="Planulka Logo"
      class="auth-logo mx-auto mb-4 h-16 w-16 md:h-20 md:w-20"
    />
    <h2 class="text-2xl md:text-3xl font-bold text-center title-text mb-2">
      Zaloguj się
    </h2>
    <mat-form-field
      appearance="outline"
      floatLabel="auto"
      class="w-full themed-form-field"
    >
      <mat-icon matPrefix>email</mat-icon>
      <input
        matInput
        type="email"
        formControlName="email"
        placeholder="Email"
        autocomplete="email"
        class="themed-input"
      />
      <mat-error *ngIf="form.get('email')?.invalid">
        Proszę podać prawidłowy email.
      </mat-error>
    </mat-form-field>

    <mat-form-field
      appearance="outline"
      floatLabel="auto"
      class="w-full themed-form-field"
    >
      <mat-icon matPrefix>lock</mat-icon>
      <input
        matInput
        [type]="hide ? 'password' : 'text'"
        formControlName="password"
        placeholder="Hasło"
        autocomplete="current-password"
        class="themed-input"
      />
      <button
        mat-icon-button
        matSuffix
        type="button"
        (click)="togglePasswordVisibility()"
        aria-label="Toggle password visibility"
      >
        <mat-icon>{{ hide ? "visibility_off" : "visibility" }}</mat-icon>
      </button>
      <mat-error *ngIf="form.get('password')?.invalid">
        Hasło musi mieć co najmniej 6 znaków.
      </mat-error>
    </mat-form-field>

    <button
      mat-flat-button
      class="w-full gradient-button py-3 text-lg font-semibold text-center rounded-lg shadow transition hover:scale-105"
      type="submit"
      [disabled]="form.invalid"
    >
      Zaloguj się
    </button>

    <div class="divider-container flex items-center my-2">
      <hr class="flex-grow border-t border-[var(--surface-border)]" />
      <span class="px-2 text-xs secondary-text">LUB</span>
      <hr class="flex-grow border-t border-[var(--surface-border)]" />
    </div>
    <button
      type="button"
      (click)="loginWithGoogle()"
      mat-stroked-button
      class="w-full google-button flex items-center justify-center gap-2 mt-2 py-3 rounded-lg shadow hover:scale-105 transition"
    >
      <mat-icon svgIcon="google" class="google-icon"></mat-icon>
      Zaloguj się przez Google
    </button>
    <div *ngIf="error" class="error-message text-center text-sm mt-2">
      {{ error }}
    </div>
    <div class="text-center text-sm secondary-text mt-2">
      Nie masz konta?
      <a
        routerLink="/auth/register"
        class="accent-link font-semibold hover:underline"
        >Zarejestruj się</a
      >
    </div>
  </form>
</div>
